---
import type { MarkdownHeading } from 'astro';
import type { CollectionEntry } from 'astro:content';

import PostLayout from './PostLayout.astro';

type Props = CollectionEntry<'translations'>['data'] & {
	postId: string;
	headings: MarkdownHeading[];
};

const { source, ...props } = Astro.props;

// Create the source link HTML to be inserted before content
const sourceLink = `
	<p class="source-link">
		原文链接: <a href="${source}" rel="nofollow noopener noreferrer" target="_blank">${source}</a>
	</p>
`;
---

<PostLayout {...props} showUpvote={false} beforeContent={sourceLink} ogBasePath="/translations">
	<slot />
</PostLayout>

<style is:global>
	.source-link {
		padding: 0.5rem 1rem;
		background-color: var(--background-color-alt);
		border-left: 4px solid var(--accent-color);
		margin: 1rem 0;
		border-radius: 4px;
	}

	.source-link a {
		word-break: break-all;
	}
</style>
